<!DOCTYPE html>
<html>
<meta charset="utf-8">
<body>
<script src="http://d3js.org/d3.v4.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v1.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.10.3/babel.min.js'></script>
<script lang='babel' type='text/babel'>
    const format = d3.format(',');
    
    const width = 1500;
    const height = 900;

    const svg = d3.select('body')
        .append('svg')
        .attr('width', width)
        .attr('height', height)
        .append('g')
        .attr('class', 'map');

    const projection = d3.geoRobinson()
        .scale(300)
        .rotate([352, 0, 0])
        .translate( [width / 2, height / 2]);

    const path = d3.geoPath().projection(projection);

    queue()
        .defer(d3.json, 'world_countries.json')
        .await(ready);

    function ready(error, data) {

        svg.append('g')
            .attr('class', 'countries')
            .selectAll('path')
            .data(data.features)
            .enter().append('path')
            .attr('d', path)
            .style('stroke', 'white')
            .style('opacity', 0.8)
            .style('stroke-width', 0.3)
            .on('click', function(d) {
                console.log('clicked')
            });

        svg.append('path')
            .datum(topojson.mesh(data.features, (a, b) => a.id !== b.id))
            .attr('class', 'names')
            .attr('d', path);
    }
</script>
</body>
</html>